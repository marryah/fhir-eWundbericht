<?xml version="1.0" encoding="UTF-8"?>

<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="workflow-reasonReference"/> 
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-wg">
    <valueCode value="fhir"/> 
  </extension> 
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="1"/> 
  </extension> 
  <url value="http://hl7.org/fhir/StructureDefinition/workflow-reasonReference"/> 
  <version value="4.0.0"/> 
  <name value="reasonReference"/> 
  <title value="Reason Reference"/> 
  <status value="draft"/> 
  <date value="2017-12-06"/> 
  <publisher value="Health Level Seven, Inc. - FHIR WG"/> 
  <contact> 
    <telecom> 
      <system value="url"/> 
      <value value="http://hl7.org/special/committees/fwg"/> 
    </telecom> 
  </contact> 
  <description value="Indicates another resource whose existence justifies this event."/> 
  <fhirVersion value="4.0.0"/> 
  <mapping> 
    <identity value="workflow"/> 
    <uri value="http://hl7.org/fhir/workflow"/> 
    <name value="Workflow Pattern"/> 
  </mapping> 
  <mapping> 
    <identity value="v2"/> 
    <uri value="http://hl7.org/v2"/> 
    <name value="HL7 v2 Mapping"/> 
  </mapping> 
  <mapping> 
    <identity value="rim"/> 
    <uri value="http://hl7.org/v3"/> 
    <name value="RIM Mapping"/> 
  </mapping> 
  <kind value="complex-type"/> 
  <abstract value="false"/> 
  <context> 
    <type value="element"/> 
    <expression value="Observation"/> 
  </context> 
  <context> 
    <type value="element"/> 
    <expression value="DiagnosticReport"/> 
  </context> 
  <context> 
    <type value="element"/> 
    <expression value="Media"/> 
  </context> 
  <context> 
    <type value="element"/> 
    <expression value="NutritionOrder"/> 
  </context> 
  <type value="Extension"/> 
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension"/> 
  <derivation value="constraint"/> 
  <snapshot> 
    <element id="Extension">
      <path value="Extension"/> 
      <short value="Why was event performed?"/> 
      <definition value="Indicates another resource whose existence justifies this event."/> 
      <min value="0"/> 
      <max value="*"/> 
      <base> 
        <path value="Extension"/> 
        <min value="0"/> 
        <max value="*"/> 
      </base> 
      <condition value="ele-1"/> 
      <constraint> 
        <key value="ele-1"/> 
        <severity value="error"/> 
        <human value="All FHIR elements must have a @value or children"/> 
        <expression value="hasValue() or (children().count() &gt; id.count())"/> 
        <xpath value="@value|f:*|h:div"/> 
        <source value="http://hl7.org/fhir/StructureDefinition/Element"/> 
      </constraint> 
      <constraint> 
        <key value="ext-1"/> 
        <severity value="error"/> 
        <human value="Must have either extensions or value[x], not both"/> 
        <expression value="extension.exists() != value.exists()"/> 
        <xpath value="exists(f:extension)!=exists(f:*[starts-with(local-name(.), 'value')])"/> 
        <source value="http://hl7.org/fhir/StructureDefinition/Extension"/> 
      </constraint> 
      <isModifier value="false"/> 
      <mapping> 
        <identity value="workflow"/> 
        <map value="Event.reasonReference"/> 
      </mapping> 
      <mapping> 
        <identity value="v2"/> 
        <map value="EVN.4 or by domain"/> 
      </mapping> 
      <mapping> 
        <identity value="rim"/> 
        <map value=".outboundRelationship[typeCode=RSON].target"/> 
      </mapping> 
    </element> 
    <element id="Extension.id">
      <path value="Extension.id"/> 
      <representation value="xmlAttr"/> 
      <short value="Unique id for inter-element referencing"/> 
      <definition value="Unique id for the element within a resource (for internal references). This may be any
       string value that does not contain spaces."/> 
      <min value="0"/> 
      <max value="1"/> 
      <base> 
        <path value="Element.id"/> 
        <min value="0"/> 
        <max value="1"/> 
      </base> 
      <type> 
        <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type">
          <valueUrl value="string"/> 
        </extension> 
        <code value="http://hl7.org/fhirpath/System.String"/> 
      </type> 
      <isModifier value="false"/> 
      <isSummary value="false"/> 
      <mapping> 
        <identity value="rim"/> 
        <map value="n/a"/> 
      </mapping> 
    </element> 
    <element id="Extension.extension">
      <path value="Extension.extension"/> 
      <slicing> 
        <discriminator> 
          <type value="value"/> 
          <path value="url"/> 
        </discriminator> 
        <description value="Extensions are always sliced by (at least) url"/> 
        <rules value="open"/> 
      </slicing> 
      <short value="Extension"/> 
      <definition value="An Extension"/> 
      <min value="0"/> 
      <max value="0"/> 
      <base> 
        <path value="Element.extension"/> 
        <min value="0"/> 
        <max value="*"/> 
      </base> 
      <type> 
        <code value="Extension"/> 
      </type> 
      <constraint> 
        <key value="ele-1"/> 
        <severity value="error"/> 
        <human value="All FHIR elements must have a @value or children"/> 
        <expression value="hasValue() or (children().count() &gt; id.count())"/> 
        <xpath value="@value|f:*|h:div"/> 
        <source value="http://hl7.org/fhir/StructureDefinition/Element"/> 
      </constraint> 
      <constraint> 
        <key value="ext-1"/> 
        <severity value="error"/> 
        <human value="Must have either extensions or value[x], not both"/> 
        <expression value="extension.exists() != value.exists()"/> 
        <xpath value="exists(f:extension)!=exists(f:*[starts-with(local-name(.), &quot;value&quot;)])"/> 
        <source value="http://hl7.org/fhir/StructureDefinition/Extension"/> 
      </constraint> 
      <isModifier value="false"/> 
      <isSummary value="false"/> 
    </element> 
    <element id="Extension.url">
      <path value="Extension.url"/> 
      <representation value="xmlAttr"/> 
      <short value="identifies the meaning of the extension"/> 
      <definition value="Source of the definition for the extension code - a logical name or a URL."/> 
      <comment value="The definition may point directly to a computable or human-readable definition of the
       extensibility codes, or it may be a logical URI as declared in some other specification.
       The definition SHALL be a URI for the Structure Definition defining the extension."/> 
      <min value="1"/> 
      <max value="1"/> 
      <base> 
        <path value="Extension.url"/> 
        <min value="1"/> 
        <max value="1"/> 
      </base> 
      <type> 
        <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type">
          <valueUrl value="uri"/> 
        </extension> 
        <code value="http://hl7.org/fhirpath/System.String"/> 
      </type> 
      <fixedUri value="http://hl7.org/fhir/StructureDefinition/workflow-reasonReference"/> 
      <isModifier value="false"/> 
      <isSummary value="false"/> 
      <mapping> 
        <identity value="rim"/> 
        <map value="N/A"/> 
      </mapping> 
    </element> 
    <element id="Extension.value[x]">
      <path value="Extension.value[x]"/> 
      <short value="Value of extension"/> 
      <definition value="Value of extension - must be one of a constrained set of the data types (see [Extensibility](http://
      hl7.org/fhir/extensibility.html) for a list)."/> 
      <min value="1"/> 
      <max value="1"/> 
      <base> 
        <path value="Extension.value[x]"/> 
        <min value="0"/> 
        <max value="1"/> 
      </base> 
      <type> 
        <code value="Reference"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Condition"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/DiagnosticReport"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/DocumentReference"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Observation"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Media"/> 
      </type> 
      <constraint> 
        <key value="ele-1"/> 
        <severity value="error"/> 
        <human value="All FHIR elements must have a @value or children"/> 
        <expression value="hasValue() or (children().count() &gt; id.count())"/> 
        <xpath value="@value|f:*|h:div"/> 
        <source value="http://hl7.org/fhir/StructureDefinition/Element"/> 
      </constraint> 
      <isModifier value="false"/> 
      <isSummary value="false"/> 
      <mapping> 
        <identity value="rim"/> 
        <map value="N/A"/> 
      </mapping> 
    </element> 
  </snapshot> 
  <differential> 
    <element id="Extension">
      <path value="Extension"/> 
      <short value="Why was event performed?"/> 
      <definition value="Indicates another resource whose existence justifies this event."/> 
      <min value="0"/> 
      <max value="*"/> 
      <mapping> 
        <identity value="workflow"/> 
        <map value="Event.reasonReference"/> 
      </mapping> 
      <mapping> 
        <identity value="v2"/> 
        <map value="EVN.4 or by domain"/> 
      </mapping> 
      <mapping> 
        <identity value="rim"/> 
        <map value=".outboundRelationship[typeCode=RSON].target"/> 
      </mapping> 
    </element> 
    <element id="Extension.extension">
      <path value="Extension.extension"/> 
      <max value="0"/> 
    </element> 
    <element id="Extension.url">
      <path value="Extension.url"/> 
      <fixedUri value="http://hl7.org/fhir/StructureDefinition/workflow-reasonReference"/> 
    </element> 
    <element id="Extension.value[x]">
      <path value="Extension.value[x]"/> 
      <min value="1"/> 
      <type> 
        <code value="Reference"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Condition"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/DiagnosticReport"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/DocumentReference"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Observation"/> 
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Media"/> 
      </type> 
    </element> 
  </differential> 
</StructureDefinition> 